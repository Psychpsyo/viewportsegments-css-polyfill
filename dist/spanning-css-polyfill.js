!function(){var e,n="single-fold-horizontal",t="single-fold-vertical",i="none",r="fold-top",o="fold-left",a="fold-height",l="fold-width",s="__foldables_env_vars__",d=/\((.*?)\)/gi,c=/@media[^\(]+/gi,f=function(e){return new RegExp("env\\(\\s*"+e+"\\s*\\)","gi")},u={spanning:sessionStorage.getItem(s+"-spanning")||i,foldSize:sessionStorage.getItem(s+"-foldSize")||0,browserShellSize:sessionStorage.getItem(s+"-browserShellSize")||0,update:S},h=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')),g="",m={all:""};function p(){if(Array.from(document.querySelectorAll("."+s)).forEach(function(e){return e.parentElement.removeChild(e)}),u.spanning!==i){var e=m[u.spanning],d=function(e){var i,s=0,d=0,c=0,f=0;return e.spanning===t&&(c=e.foldSize,f=window.innerHeight,s=window.innerWidth/2-e.foldSize/2),e.spanning===n&&(c=window.innerWidth,f=e.foldSize,d=window.innerHeight/2-e.foldSize/2-e.browserShellSize),(i={})[r]=d,i[o]=s,i[a]=f,i[l]=c,i}(u);Object.keys(d).forEach(function(n){var t;t=d[n]+"px",e=e.replace(f(n),t)});var c=document.createElement("style");c.className=s,c.textContent=e,document.head.appendChild(c)}}(e=h,Promise.all(e.map(function(e){var n=e.href;return n?fetch(n).then(function(e){return e.text()}):e.textContent}))).then(function(e){g=e.join("\n"),m.all=g.replace(new RegExp("(@media.*?\\bspanning\\b[^{]+)\\{([\\s\\S]+?\\})\\s*\\}","gi"),"");var r=function(e){var r=function(e){var n=new RegExp("(@media.*?\\bspanning\\b[^{]+)\\{([\\s\\S]+?\\})\\s*\\}","gi");return Array.from(e.matchAll(n))}(e),o={};return o[n]="",o[t]="",o[i]="",r.forEach(function(e){var r=e[1],a=e[2],l=i;r.indexOf(n)>-1&&(l=n),r.indexOf(t)>-1&&(l=t);var s=r.match(c)||[],f=r.match(d)||[];f=f.filter(function(e){return!e.includes("spanning")}).join(" and "),o[l]+="\n      "+s+" "+f+" {\n        "+a+"\n      }"}),o}(g);m=Object.assign(m,r),h.forEach(function(e){return e.parentElement.removeChild(e)});var o,a,l=document.createElement("style");l.textContent=m.all,document.head.appendChild(l),Object.defineProperty(window,s,{value:u}),window.addEventListener("resize",(o=p,function(){var e=arguments,n=this;clearTimeout(a),a=setTimeout(function(){return o.apply(n,e)},150)})),window.addEventListener("message",function(e){"update"===(e.data.action||"")&&S(e.data.value||{})}),p()});var v=new Set(["foldSize","browserShellSize","spanning"]);function S(e){Object.keys(e).forEach(function(n){v.has(n)&&(u[n]=e[n],sessionStorage.setItem(s+"-"+n,u[n])),p()})}}();
//# sourceMappingURL=spanning-css-polyfill.js.map
